# 网页数据清理插件

中文 | [English](./README_EN.md)

一个简单高效的浏览器扩展，帮助用户快速清理特定网站的缓存、Cookie 等浏览数据。

## ✨ 主要功能

- 🎯 精确清理当前网站的缓存数据
- 🛡️ **白名单保护** - 一键保护常用网站的 Cookies，避免重新登录
- 📊 **空间预估** - 实时显示预计释放的存储空间大小
- 🔒 敏感数据清理前的确认对话框
- ⚡ **快速清理** - 打开即可点击，无需滚动
- 🔄 可选的自动刷新当前页面
- 💪 深度清理与快速清理模式
- 🌐 支持中英文国际化
- 🎨 现代化渐变设计，隐藏滚动条
- 📈 集成性能检测，了解优化效果
- ⏱️ 自定义清理规则并可立即执行
- ♿ 无障碍支持（焦点可见、键盘可导航、对比度优化）
- 🧩 统一组件样式（按钮/输入/下拉/卡片），响应式布局与过渡动效

## 📸 产品截图

![产品截图](public/1.png)

## 🔧 支持清理的数据类型

- 网站缓存
- Cookie 数据
- 本地存储
- Service Worker
- IndexedDB 数据库
- SessionStorage 会话存储
- WebSQL 数据库
- 表单数据
- 文件系统存储

## 📊 性能检测指标

- DNS 解析时间
- TCP 连接时间
- 请求响应时间
- DOM 解析时间
- 页面加载总时间
- 资源数量及大小

## 📦 安装方法

1. 克隆项目
   git clone
   cd ClearPage

2. 安装依赖
   npm install
3. 构建项目
   npm run build

4. 在浏览器中安装

- 打开浏览器扩展管理页面
- 开启"开发者模式"
- 点击"加载已解压的扩展程序"
- 选择项目的 `dist` 目录

## 💡 使用说明

1. 点击插件图标打开操作面板
2. 插件会自动应用智能清理建议，为您选择最适合的数据类型
3. 使用全选/取消全选功能快速管理要清理的数据类型
4. 点击"清除数据"按钮执行清理
5. 如涉及 Cookie 等敏感数据会有警告提示
6. 确认后自动清理并刷新页面
7. 切换到"性能检测"标签页可查看自动执行的性能分析
8. 在"设置"页面可创建和管理自定义清理规则

## 🔨 开发相关

### 技术栈

- TypeScript + React
- Tailwind CSS
- 浏览器扩展 API

### 开发命令

开发模式
npm start
构建
npm run build
测试
npm test

## ⚠️ 注意事项

- 清除 Cookie 会导致网站登录状态丢失
- 插件仅对当前打开的网站生效
- 建议在使用前确认要清理的数据类型

## 🚑 版本修复计划（Release Fix Plan）

### 目标

- 恢复近 30 天活跃与留存，降低卸载率，提升商店评分与转化

### 增强项（P2，T+6–10 天）

- 智能清理策略：结合域名类型（`smartCleanUtils`）为门户/登录站默认保留 Cookies
  - 代码：`src/utils/smartCleanUtils.ts:192`

### 实施清单（代码位置）

- 默认类型：`src/components/CacheClearButton.tsx:24` 改为 `["cache"]`
- 二次确认与白名单：`src/components/CacheClearButton.tsx:309, 348`
- 弹窗布局：`src/components/App.tsx:104`
- 版本读取与统一：`src/components/SettingsPanel.tsx:875`、`public/manifest.json`
- 特殊页禁测：`src/components/PerformancePanel.tsx:236-273`
- 全局类型警示（UI）：`src/components/CacheClearButton.tsx` 数据类型描述区
- 批处理与日志：`src/services/dataClearingService.ts:110-116, 186-219`

### 验证指标

- 次日留存、7 日留存、卸载率、商店评分
- 清理后自动刷新率、错误提示出现率、性能页特殊页面占比

### 发布与回滚

- 灰度发布（少量用户），观察指标后全量
- 关键项加 Feature Flag，异常即回滚：恢复默认选择/关闭禁测策略

## 📝 许可证

MIT License

## 📅 更新日志

### 2025-11-15

**界面与可用性更新**

- 弹窗固定高度 `600px`，宽度响应式 `520–640px`（`src/components/App.tsx:104`）
- 侧边栏宽度缩减并更协调：`w-36/sm:w-40/md:w-44`（`src/components/App.tsx:106`）
- 左侧导航文字强制单行，避免换行导致排版断裂（`src/styles/tailwind.css:26-32`）
- 统一组件样式规范与焦点可见无障碍（`src/styles/tailwind.css`）
- 导航增加可访问属性：`role="navigation"`、`aria-current`（`src/components/App.tsx:113-126`）
- 移除清理历史记录功能以简化权限与复杂度（`src/services/historyService.ts` 已删除）

### 2025-11-06

**重大更新 v1.0.11 - 全面优化版**

#### 核心功能优化

- 🛡️ **新增白名单保护功能** - 一键保护常用网站 Cookies，解决重登录痛点
- 📊 **新增空间预估显示** - 实时显示预计释放的存储空间（MB/GB）
- ⚡ **全新布局设计** - 清理按钮置顶，打开即可点击，无需滚动
- 💪 **快速/深度清理模式** - 一键切换基本清理或完全清理

#### 用户体验提升

- ✨ 简化清理流程，移除智能推荐，用户完全掌控
- 🔒 添加敏感数据清理确认对话框，防止误操作
- 🔄 自动刷新改为默认关闭，且仅刷新当前标签页（不影响其他标签）
- 👀 隐藏所有滚动条，界面更简洁美观
- 🎨 全面优化界面样式，添加渐变、阴影、现代化动画效果
- 🎯 为设置面板规则添加"立即执行"按钮

#### 技术修复

- 🔧 修复 React 18 兼容性问题，升级为 createRoot API
- 🔧 修复 TypeScript 类型定义错误
- ⚡ 优化组件渲染性能，移除不必要的强制重渲染
- ❌ 移除自动定时清理功能，避免误清除登录状态
- 📦 统一版本号至 1.0.11

### 2025-05-10

- ✨ 实现性能检测自动执行，用户切换到检测标签页后自动显示结果
- 🚀 优化智能建议，开启插件时自动应用推荐的数据类型
- 📋 新增数据类型全选/取消全选功能，提升操作便捷性

### 2025-05-03

- ✨ 新增自定义清理规则功能，支持用户创建、编辑和管理规则
- 🔄 优化界面导航，添加标签式切换

### 2025-04-25

- 🎨 优化插件界面布局，增加宽度，提高可用性
- ✨ 改进数据类型显示方式，采用分组和多列布局
- 🚀 增强按钮和交互元素的视觉效果

### 2025-04-22

- ✨ 完善数据类型支持，新增 IndexedDB、SessionStorage、WebSQL 等数据类型
- 🚀 实现深度清理模式，更彻底地清除网站数据

### 2025-04-17

- 💡 新增清理建议与一键应用推荐功能

### 2025-04-04

- ✨ 新增清除数据耗时显示功能
- 🚀 优化缓存清理性能，提高清除速度

### 2025-02-03

- ✨ 新增清除单个网站域名的历史记录功能

[![Ask DeepWiki](https://deepwiki.com/badge.svg)](https://deepwiki.com/yangyuan-zhen/ClearPage)

## ⭐ Star 历史

[![Star History Chart](https://api.star-history.com/svg?repos=yangyuan-zhen/ClearPage&type=Date)](https://star-history.com/#yangyuan-zhen/ClearPage&Date)
